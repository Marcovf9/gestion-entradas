generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Zona {
  id     Int    @id @default(autoincrement())
  nombre String @unique
  precio Float

  // ¡CAMPO FALTANTE AGREGADO!
  color String

  butacas Butaca[]
}

model Venta {
  id              String   @id @default(uuid())
  compradorNombre String
  compradorEmail  String
  fechaVenta      DateTime @default(now())
  butacas         Butaca[]
}

model Butaca {
  id      Int  @id @default(autoincrement())
  fila    Int
  columna Int
  zona    Zona @relation(fields: [zonaId], references: [id])
  zonaId  Int

  disponible Boolean @default(true)

  estadoReserva String? // 'RESERVED' si está temporalmente reservada
  reservaHasta  DateTime?
  reservaId     String?
  compradorTemp String?

  venta   Venta?  @relation(fields: [ventaId], references: [id])
  ventaId String?

  @@unique([fila, columna, zonaId])
}
